# Category é¡µé¢é‡æ–°è®¾è®¡è¯´æ˜æ–‡æ¡£

## è®¾è®¡æ¦‚è§ˆ

Category é¡µé¢å·²ç»è¿‡å…¨æ–°è®¾è®¡ï¼Œé‡‡ç”¨ç°ä»£åŒ–çš„å¡ç‰‡å¼å¸ƒå±€ï¼Œæä¾›æ›´ä¸°å¯Œçš„å­¦ä¹ ä¿¡æ¯å±•ç¤ºã€‚

## æ–°å¢åŠŸèƒ½ç‰¹æ€§

### 1. è§†è§‰æ”¹è¿›
- âœ¨ **æ¸å˜èƒŒæ™¯**: é‡‡ç”¨ç´«è‰²æ¸å˜èƒŒæ™¯ï¼Œæå‡è§†è§‰æ•ˆæœ
- ğŸ“± **å¡ç‰‡å¼è®¾è®¡**: æ¯ä¸ªåˆ†ç±»ä½¿ç”¨ç‹¬ç«‹å¡ç‰‡å±•ç¤ºï¼Œå¸¦é˜´å½±å’Œåœ†è§’
- ğŸ¨ **å½©è‰²ç¼–å·**: æ¯ä¸ªåˆ†ç±»éƒ½æœ‰æ¸å˜è‰²ç¼–å·æ ‡è¯†
- ğŸŒˆ **çŠ¶æ€é¢œè‰²**: ä¸åŒçŠ¶æ€ä½¿ç”¨ä¸åŒçš„æ¸å˜è‰²æ ‡è¯†

### 2. å­¦ä¹ çŠ¶æ€å±•ç¤º

#### çŠ¶æ€ç±»å‹
- **æœªå¼€å§‹** (not_started): ç°è‰²å¾½ç« ï¼Œè¡¨ç¤ºå°šæœªå¼€å§‹å­¦ä¹ 
- **è¿›è¡Œä¸­** (in_progress): æ©™é»„è‰²æ¸å˜å¾½ç« ï¼Œè¡¨ç¤ºæ­£åœ¨å­¦ä¹ 
- **å·²é€šå…³** (completed): ç»¿è‰²æ¸å˜å¾½ç« ï¼Œè¡¨ç¤ºå·²å®Œæˆæ‰€æœ‰é¢˜ç›®

### 3. è¿›åº¦å±•ç¤º
- ğŸ“Š **è¿›åº¦æ¡**: ç›´è§‚æ˜¾ç¤ºå­¦ä¹ å®Œæˆåº¦ (0-100%)
- ğŸ¯ **ç™¾åˆ†æ¯”**: åœ¨è¿›åº¦æ¡å³ä¾§æ˜¾ç¤ºå…·ä½“ç™¾åˆ†æ¯”

### 4. ç­”é¢˜ç»Ÿè®¡
- **å·²å®Œæˆ**: æ˜¾ç¤º "X/æ€»é¢˜æ•°" æ ¼å¼
- **æ­£ç¡®ç‡**: æ˜¾ç¤ºç­”é¢˜æ­£ç¡®ç‡ç™¾åˆ†æ¯”
  - æ­£ç¡®ç‡ â‰¥ 80% æ˜¾ç¤ºä¸ºç»¿è‰²ï¼Œé¼“åŠ±å­¦ä¹ 
  - æ­£ç¡®ç‡ < 80% æ˜¾ç¤ºä¸ºæ™®é€šé¢œè‰²
- **ç©ºçŠ¶æ€**: æœªå¼€å§‹æ—¶æ˜¾ç¤º "å¼€å§‹å­¦ä¹ å§ï¼"

### 5. æ˜Ÿçº§è¯„ä»·ç³»ç»Ÿ
- â­ **1-5æ˜Ÿ**: æ ¹æ®å­¦ä¹ è¡¨ç°æ˜¾ç¤ºæ˜Ÿçº§
- è¯„ä»·æ ‡å‡†ï¼ˆå¾…æ¥å£æä¾›å…·ä½“ç®—æ³•ï¼‰:
  - 5æ˜Ÿ: ä¼˜ç§€ (æ­£ç¡®ç‡ â‰¥ 95%)
  - 4æ˜Ÿ: è‰¯å¥½ (æ­£ç¡®ç‡ â‰¥ 85%)
  - 3æ˜Ÿ: ä¸­ç­‰ (æ­£ç¡®ç‡ â‰¥ 70%)
  - 2æ˜Ÿ: éœ€æé«˜ (æ­£ç¡®ç‡ â‰¥ 60%)
  - 1æ˜Ÿ: éœ€åŠ å¼º (æ­£ç¡®ç‡ < 60%)
  - 0æ˜Ÿ: æœªå¼€å§‹æˆ–æœªå®Œæˆ

### 6. å­—ä½“å’Œé—´è·ä¼˜åŒ–
- **æ ‡é¢˜å­—ä½“**: 32rpxï¼ŒåŠ ç²—
- **å‰¯æ ‡é¢˜**: 24rpx
- **ç»Ÿè®¡æ•°å­—**: 32rpxï¼ŒåŠ ç²—
- **å¡ç‰‡é—´è·**: 24rpx
- **å†…è¾¹è·**: 32rpx

## å½“å‰æ¨¡æ‹Ÿæ•°æ®

### æ•°æ®ç»“æ„

```javascript
{
  id: "åˆ†ç±»ID",
  title: "åˆ†ç±»æ ‡é¢˜",
  
  // æ–°å¢å­—æ®µï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
  progress: 85,           // å­¦ä¹ è¿›åº¦ 0-100
  stars: 4,               // æ˜Ÿçº§è¯„ä»· 0-5
  status: "in_progress",  // çŠ¶æ€: not_started | in_progress | completed
  
  // ç­”é¢˜ç»Ÿè®¡
  stats: {
    total: 50,            // æ€»é¢˜æ•°
    completed: 42,        // å·²å®Œæˆé¢˜æ•°
    correct: 38,          // ç­”å¯¹é¢˜æ•°
    accuracy: 90          // æ­£ç¡®ç‡ç™¾åˆ†æ¯”
  }
}
```

### æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆé€»è¾‘

æ–‡ä»¶: `pages/category/index.js`

#### æ–¹æ³•è¯´æ˜

1. **getMockProgress(index)**: ç”Ÿæˆè¿›åº¦æ•°æ®
   - è¿”å›: 0, 35, 60, 85, 100, 20, 95, 50 (å¾ªç¯)

2. **getMockStars(index)**: ç”Ÿæˆæ˜Ÿçº§æ•°æ®
   - è¿”å›: 0, 3, 4, 5, 5, 2, 4, 3 (å¾ªç¯)

3. **getMockStatus(index)**: ç”ŸæˆçŠ¶æ€æ•°æ®
   - è¿”å›: not_started, in_progress, completed (å¾ªç¯)

4. **getMockStats(index)**: ç”Ÿæˆç»Ÿè®¡æ•°æ®
   - è¿”å›å„ç§ç­”é¢˜æƒ…å†µçš„ç»Ÿè®¡å¯¹è±¡

## API å¯¹æ¥æŒ‡å—

### éœ€è¦åç«¯æä¾›çš„æ•°æ®ç»“æ„

å½“åç«¯ API å‡†å¤‡å¥½åï¼Œéœ€è¦åœ¨åˆ†ç±»åˆ—è¡¨æ¥å£ä¸­æ·»åŠ ä»¥ä¸‹å­—æ®µï¼š

```json
{
  "sectionGroups": [
    {
      "id": "åˆ†ç±»ID",
      "title": "åˆ†ç±»æ ‡é¢˜",
      "questionCount": 50,
      
      // éœ€è¦æ–°å¢çš„å­—æ®µ
      "studentProgress": {
        "progress": 85,           // å­¦ä¹ è¿›åº¦ç™¾åˆ†æ¯”
        "stars": 4,               // æ˜Ÿçº§è¯„ä»·
        "status": "in_progress",  // å­¦ä¹ çŠ¶æ€
        "statistics": {
          "totalQuestions": 50,   // æ€»é¢˜æ•°
          "completedQuestions": 42, // å·²å®Œæˆé¢˜æ•°
          "correctAnswers": 38,   // ç­”å¯¹é¢˜æ•°
          "accuracy": 90          // æ­£ç¡®ç‡
        }
      }
    }
  ]
}
```

### ä¿®æ”¹ä»£ç å¯¹æ¥çœŸå®æ•°æ®

åœ¨ `pages/category/index.js` ä¸­ï¼Œä¿®æ”¹ `onLoad` æ–¹æ³•ï¼š

```javascript
onLoad: function (options) {
  wx.showLoading({
    title: 'æ­£åœ¨åŠ è½½',
  })
  this.setData({
      action: options.action
  })
  wx.u.getQuestionMenu().then(res => {
    console.log(res)
    
    // ä½¿ç”¨çœŸå® API æ•°æ®ï¼ˆæ›¿æ¢æ¨¡æ‹Ÿæ•°æ®ï¼‰
    const categoriesWithProgress = res.result.map((item, index) => {
      // å¦‚æœ API è¿”å›äº†å­¦ç”Ÿè¿›åº¦æ•°æ®
      if (item.studentProgress) {
        return {
          ...item,
          progress: item.studentProgress.progress,
          stars: item.studentProgress.stars,
          status: item.studentProgress.status,
          stats: {
            total: item.studentProgress.statistics.totalQuestions,
            completed: item.studentProgress.statistics.completedQuestions,
            correct: item.studentProgress.statistics.correctAnswers,
            accuracy: item.studentProgress.statistics.accuracy
          }
        }
      } else {
        // å¦‚æœæ²¡æœ‰è¿›åº¦æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤å€¼
        return {
          ...item,
          progress: 0,
          stars: 0,
          status: 'not_started',
          stats: {
            total: item.questionCount || 0,
            completed: 0,
            correct: 0,
            accuracy: 0
          }
        }
      }
    })
    
    this.setData({
      cateList: categoriesWithProgress
    })
    wx.hideLoading()
  })
}
```

### åç«¯è®¡ç®—é€»è¾‘å»ºè®®

#### 1. è¿›åº¦è®¡ç®—
```
progress = (completedQuestions / totalQuestions) * 100
```

#### 2. çŠ¶æ€åˆ¤æ–­
```
if (completedQuestions === 0) {
  status = "not_started"
} else if (completedQuestions < totalQuestions) {
  status = "in_progress"
} else {
  status = "completed"
}
```

#### 3. æ˜Ÿçº§è¯„ä»·
```
if (status !== "completed") {
  stars = 0
} else {
  if (accuracy >= 95) stars = 5
  else if (accuracy >= 85) stars = 4
  else if (accuracy >= 70) stars = 3
  else if (accuracy >= 60) stars = 2
  else stars = 1
}
```

#### 4. æ­£ç¡®ç‡è®¡ç®—
```
accuracy = (correctAnswers / completedQuestions) * 100
```

## å¾…åˆ é™¤çš„æ¨¡æ‹Ÿæ•°æ®æ–¹æ³•

å½“æ¥å…¥çœŸå® API åï¼Œå¯ä»¥åˆ é™¤ä»¥ä¸‹æ–¹æ³•ï¼š
- `getMockProgress()`
- `getMockStars()`
- `getMockStatus()`
- `getMockStats()`

## è§†è§‰æ•ˆæœè¯´æ˜

### é¢œè‰²æ–¹æ¡ˆ

#### ä¸»è‰²è°ƒ
- èƒŒæ™¯æ¸å˜: `#667eea` â†’ `#764ba2`
- è¿›è¡Œä¸­å¡ç‰‡: ç´«è‰²æ¸å˜
- å·²å®Œæˆå¡ç‰‡: ç»¿è‰²æ¸å˜ `#43e97b` â†’ `#38f9d7`

#### çŠ¶æ€é¢œè‰²
- æœªå¼€å§‹: `#dfe6e9` (ç°è‰²)
- è¿›è¡Œä¸­: `#fa9d1c` â†’ `#feca57` (æ©™é»„æ¸å˜)
- å·²å®Œæˆ: `#43e97b` â†’ `#38f9d7` (ç»¿è‰²æ¸å˜)

#### æ–‡å­—é¢œè‰²
- ä¸»æ ‡é¢˜: `#2d3436`
- å‰¯æ ‡é¢˜: `#636e72`
- é«˜æ­£ç¡®ç‡: `#00b894` (ç»¿è‰²)

### äº¤äº’æ•ˆæœ
- **ç‚¹å‡»åé¦ˆ**: å¡ç‰‡æŒ‰ä¸‹æ—¶ç¼©å°åˆ° 98%
- **è¿‡æ¸¡åŠ¨ç”»**: æ‰€æœ‰çŠ¶æ€å˜åŒ–éƒ½æœ‰å¹³æ»‘è¿‡æ¸¡
- **è§†è§‰å±‚æ¬¡**: ä½¿ç”¨é˜´å½±å’Œåœ†è§’è¥é€ å±‚æ¬¡æ„Ÿ

## å“åº”å¼è®¾è®¡

- ä½¿ç”¨ rpx å•ä½ç¡®ä¿ä¸åŒè®¾å¤‡é€‚é…
- å¡ç‰‡è‡ªé€‚åº”å®½åº¦
- æ–‡å­—è‡ªåŠ¨æ¢è¡Œï¼Œé˜²æ­¢æº¢å‡º

## æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨æ¡ä»¶æ¸²æŸ“ (`wx:if`) å‡å°‘ä¸å¿…è¦çš„DOM
- åˆç†ä½¿ç”¨ `wx:key` æå‡åˆ—è¡¨æ¸²æŸ“æ€§èƒ½
- CSS åŠ¨ç”»ä½¿ç”¨ transform è€Œé width/height

## ç»´æŠ¤å»ºè®®

1. å®šæœŸæ›´æ–°æ˜Ÿçº§è¯„ä»·ç®—æ³•ï¼Œç¡®ä¿å…¬å¹³æ€§
2. æ ¹æ®ç”¨æˆ·åé¦ˆè°ƒæ•´è¿›åº¦æ˜¾ç¤ºæ–¹å¼
3. å¯ä»¥æ·»åŠ åŠ¨ç”»æ•ˆæœå¢å¼ºç”¨æˆ·ä½“éªŒ
4. è€ƒè™‘æ·»åŠ éª¨æ¶å±ä¼˜åŒ–åŠ è½½ä½“éªŒ

## æ›´æ–°æ—¥å¿—

- **2025-10-13**: å®Œæˆé¡µé¢é‡æ–°è®¾è®¡
  - æ–°å¢å¡ç‰‡å¼å¸ƒå±€
  - æ·»åŠ å­¦ä¹ çŠ¶æ€ã€è¿›åº¦ã€ç»Ÿè®¡ä¿¡æ¯
  - å®ç°æ˜Ÿçº§è¯„ä»·ç³»ç»Ÿ
  - ä¼˜åŒ–å­—ä½“å¤§å°å’Œè§†è§‰å±‚æ¬¡
  - ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®å±•ç¤ºåŠŸèƒ½

